<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>联合类型 | 热爱生活喜欢睡觉</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/img/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="热爱生活 喜欢睡觉">
    <meta name="author" content="热爱生活 喜欢睡觉">
    <meta name="keywords" content="热爱生活 喜欢睡觉的博客  vuepress搭建个人博客  IT博客  前端学习">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.7adf3117.css" as="style"><link rel="preload" href="/assets/js/app.d7492e7d.js" as="script"><link rel="preload" href="/assets/js/2.b2d070e6.js" as="script"><link rel="preload" href="/assets/js/37.023353ed.js" as="script"><link rel="preload" href="/assets/js/3.8cf3b89c.js" as="script"><link rel="prefetch" href="/assets/js/10.98c66250.js"><link rel="prefetch" href="/assets/js/11.c56e18b7.js"><link rel="prefetch" href="/assets/js/12.5db6e70f.js"><link rel="prefetch" href="/assets/js/13.b2b13278.js"><link rel="prefetch" href="/assets/js/14.78f30561.js"><link rel="prefetch" href="/assets/js/15.a9c8cbaf.js"><link rel="prefetch" href="/assets/js/16.d3d08f69.js"><link rel="prefetch" href="/assets/js/17.2dd50800.js"><link rel="prefetch" href="/assets/js/18.14f5627a.js"><link rel="prefetch" href="/assets/js/19.842c6f50.js"><link rel="prefetch" href="/assets/js/20.4f3badb3.js"><link rel="prefetch" href="/assets/js/21.be701f26.js"><link rel="prefetch" href="/assets/js/22.4d1356f6.js"><link rel="prefetch" href="/assets/js/23.742c4861.js"><link rel="prefetch" href="/assets/js/24.4ea5ed74.js"><link rel="prefetch" href="/assets/js/25.8cdb0dd2.js"><link rel="prefetch" href="/assets/js/26.55d2641b.js"><link rel="prefetch" href="/assets/js/27.a6a51c41.js"><link rel="prefetch" href="/assets/js/28.feea5127.js"><link rel="prefetch" href="/assets/js/29.91c61abd.js"><link rel="prefetch" href="/assets/js/30.f168db5e.js"><link rel="prefetch" href="/assets/js/31.227ba182.js"><link rel="prefetch" href="/assets/js/32.d0eb0625.js"><link rel="prefetch" href="/assets/js/33.05a2d492.js"><link rel="prefetch" href="/assets/js/34.b10b07c7.js"><link rel="prefetch" href="/assets/js/35.d0cb7cb2.js"><link rel="prefetch" href="/assets/js/36.328f34ec.js"><link rel="prefetch" href="/assets/js/38.91dc5f83.js"><link rel="prefetch" href="/assets/js/39.046dbc7e.js"><link rel="prefetch" href="/assets/js/4.8a311255.js"><link rel="prefetch" href="/assets/js/40.d8320844.js"><link rel="prefetch" href="/assets/js/41.c075de24.js"><link rel="prefetch" href="/assets/js/42.97e05f0f.js"><link rel="prefetch" href="/assets/js/43.907b9262.js"><link rel="prefetch" href="/assets/js/44.eab23cc1.js"><link rel="prefetch" href="/assets/js/45.2cda785e.js"><link rel="prefetch" href="/assets/js/46.2b1c7060.js"><link rel="prefetch" href="/assets/js/47.df7a7374.js"><link rel="prefetch" href="/assets/js/48.f49d3c8f.js"><link rel="prefetch" href="/assets/js/49.45a6143b.js"><link rel="prefetch" href="/assets/js/5.a513217f.js"><link rel="prefetch" href="/assets/js/50.53683afb.js"><link rel="prefetch" href="/assets/js/51.765f0ab6.js"><link rel="prefetch" href="/assets/js/6.7ea4f2b0.js"><link rel="prefetch" href="/assets/js/7.f5757c8b.js"><link rel="prefetch" href="/assets/js/8.b3a2010b.js"><link rel="prefetch" href="/assets/js/9.4e9ab4a0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7adf3117.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">热爱生活喜欢睡觉</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/synopsis/guide.html" class="nav-link">
  先导
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TypeScript/" class="nav-link router-link-active">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/frontend/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/WebGL/" class="nav-link">
  WebGL
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pit/git/" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.markdown.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MarkDown手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/mawenqing1/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/synopsis/guide.html" class="nav-link">
  先导
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TypeScript/" class="nav-link router-link-active">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/frontend/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/WebGL/" class="nav-link">
  WebGL
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pit/git/" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" " class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label=" " class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.markdown.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MarkDown手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/mawenqing1/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Type Script</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/TypeScript/" aria-current="page" class="sidebar-link">TypeScript简介</a></li><li><a href="/frontend/TypeScript/classSafety.html" class="sidebar-link">类型安全</a></li><li><a href="/frontend/TypeScript/class.html" class="sidebar-link">类型</a></li><li><a href="/frontend/TypeScript/assertion.html" class="sidebar-link">断言</a></li><li><a href="/frontend/TypeScript/joint.html" aria-current="page" class="active sidebar-link">联合类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/TypeScript/joint.html#联合类型-2" class="sidebar-link">联合类型</a></li><li class="sidebar-sub-header"><a href="/frontend/TypeScript/joint.html#可辨识联合类型" class="sidebar-link">可辨识联合类型</a></li></ul></li><li><a href="/frontend/TypeScript/cross.html" class="sidebar-link">交叉类型</a></li><li><a href="/frontend/TypeScript/guard.html" class="sidebar-link">类型守卫</a></li><li><a href="/frontend/TypeScript/function.html" class="sidebar-link">TypeScript函数</a></li><li><a href="/frontend/TypeScript/interface.html" class="sidebar-link">接口</a></li><li><a href="/frontend/TypeScript/kind.html" class="sidebar-link">类</a></li><li><a href="/frontend/TypeScript/generic.html" class="sidebar-link">泛型</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="联合类型"><a href="#联合类型" class="header-anchor">#</a> 联合类型</h1> <h2 id="联合类型-2"><a href="#联合类型-2" class="header-anchor">#</a> 联合类型</h2> <p>联合类型表示的值可能是多种不同类型当中的某一个。比如，A | B 联合类型的某个值就可能是 A 类型，也可能是 B 类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">'mwq'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此外，对于联合类型来说，可能还会遇到以下用法：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> num<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Cap</span> <span class="token operator">=</span> <span class="token string">&quot;butt&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;round&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="可辨识联合类型"><a href="#可辨识联合类型" class="header-anchor">#</a> 可辨识联合类型</h2> <p>这种类型的本质是结合联合类型和字面量类型的一种类型保护方法。如果一个类型是多个类型的联合类型，且多个类型含有一个公共属性，那么就可以利用这个公共属性，来创建不同的类型保护区块。<strong>它包含3个要点：可辨识、联合类型和类型守卫</strong>。</p> <ol><li>可辨识</li></ol> <p>可辨识要求联合类型中的每个元素都含有一个单例类型属性：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> CarTransmission <span class="token punctuation">{</span>
  Automatic <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span>
  Manual <span class="token operator">=</span> <span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Motorcycle</span> <span class="token punctuation">{</span>
  vType<span class="token operator">:</span> <span class="token string">&quot;motorcycle&quot;</span><span class="token punctuation">;</span> 
  make<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// year</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  vType<span class="token operator">:</span> <span class="token string">&quot;car&quot;</span><span class="token punctuation">;</span> 
  transmission<span class="token operator">:</span> CarTransmission
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Truck</span> <span class="token punctuation">{</span>
  vType<span class="token operator">:</span> <span class="token string">&quot;truck&quot;</span><span class="token punctuation">;</span> 
  capacity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// tons</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上述代码中，我们分别定义了<code>Motorcycle</code>、<code>Car</code>和<code>Truck</code>三个接口，在这些接口中都包含一个<code>vType</code>属性，该属性被称为可辨识的属性，而其它的属性只跟特性的接口相关。</p> <ol start="2"><li>联合类型</li></ol> <p>基于前面定义了三个接口，我们可以创建一个<code>Vehicle</code>联合类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Vehicle</span> <span class="token operator">=</span> Motorcycle <span class="token operator">|</span> Car <span class="token operator">|</span> Truck<span class="token punctuation">;</span>
</code></pre></div><p>现在我们就可以开始使用<code>Vehicle</code>联合类型，对于<code>Vehicle</code>类型的变量，它可以表示不同类型的车辆。</p> <ol start="3"><li>类型守卫</li></ol> <p>下面我们来定义一个<code>evaluatePrice</code>方法，该方法用于根据车辆的类型、容量和评估因子来计算价格，具体实现如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token constant">EVALUATION_FACTOR</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span> 

<span class="token keyword">function</span> <span class="token function">evaluatePrice</span><span class="token punctuation">(</span>vehicle<span class="token operator">:</span> Vehicle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> vehicle<span class="token punctuation">.</span>capacity <span class="token operator">*</span> <span class="token constant">EVALUATION_FACTOR</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myTruck<span class="token operator">:</span> Truck <span class="token operator">=</span> <span class="token punctuation">{</span> vType<span class="token operator">:</span> <span class="token string">&quot;truck&quot;</span><span class="token punctuation">,</span> capacity<span class="token operator">:</span> <span class="token number">9.5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">evaluatePrice</span><span class="token punctuation">(</span>myTruck<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对于以上代码，TypeScript 编译器将会提示以下错误信息：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>Property <span class="token string">'capacity'</span> does not exist on <span class="token keyword">type</span> <span class="token string">'Vehicle'</span><span class="token punctuation">.</span>      <span class="token comment">//类型“Vehicle”上不存在属性“capacity”。</span>
Property <span class="token string">'capacity'</span> does not exist on <span class="token keyword">type</span> <span class="token string">'Motorcycle'</span><span class="token punctuation">.</span>   <span class="token comment">//类型“Motorcycle”上不存在属性“capacity”</span>
</code></pre></div><p>原因是在<code>Motorcycle</code>接口中，并不存在<code>capacity</code>属性，而对于<code>Car</code>接口来说，它也不存在<code>capacity</code>属性。那么，现在我们应该如何解决以上问题呢？这时，我们可以使用类型守卫。下面我们来重构一下前面定义的<code>evaluatePrice</code>方法，重构后的代码如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">evaluatePrice</span><span class="token punctuation">(</span>vehicle<span class="token operator">:</span> Vehicle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>vehicle<span class="token punctuation">.</span>vType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;car&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> vehicle<span class="token punctuation">.</span>transmission <span class="token operator">*</span> <span class="token constant">EVALUATION_FACTOR</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;truck&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> vehicle<span class="token punctuation">.</span>capacity <span class="token operator">*</span> <span class="token constant">EVALUATION_FACTOR</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;motorcycle&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> vehicle<span class="token punctuation">.</span>make <span class="token operator">*</span> <span class="token constant">EVALUATION_FACTOR</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在以上代码中，我们使用<code>switch</code>和<code>case</code>运算符来实现类型守卫，从而确保在<code>evaluatePrice</code>方法中，我们可以安全地访问<code>vehicle</code>对象中的所包含的属性，来正确的计算该车辆类型所对应的价格。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2021年9月1日星期三晚上10点37分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/TypeScript/assertion.html" class="prev">
        断言
      </a></span> <span class="next"><a href="/frontend/TypeScript/cross.html">
        交叉类型
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d7492e7d.js" defer></script><script src="/assets/js/2.b2d070e6.js" defer></script><script src="/assets/js/37.023353ed.js" defer></script><script src="/assets/js/3.8cf3b89c.js" defer></script>
  </body>
</html>
